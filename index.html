<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | V16 Architect Ultra</title>
    <style>
        :root {
            --bg: #050400;
            --accent: #ffcc33;
            --glow: rgba(255, 204, 51, 0.3);
            --glass: rgba(20, 18, 10, 0.95);
            --border: rgba(255, 255, 255, 0.08);
            --text: #ffffff;
            --font: 'Segoe UI', system-ui, sans-serif;
        }

        /* Theme Variants */
        body.theme-blue { --accent: #00d4ff; --glow: rgba(0, 212, 255, 0.4); }
        body.theme-red { --accent: #ff3e3e; --glow: rgba(255, 62, 62, 0.4); }
        body.theme-glitch { --accent: #00ff41; --glow: rgba(0, 255, 65, 0.4); }
        body.theme-cyber { --accent: #ff00ff; --glow: rgba(255, 0, 255, 0.4); }
        body.theme-volcano { --accent: #ff6600; --glow: rgba(255, 102, 0, 0.4); }
        body.theme-ash { --accent: #888888; --glow: rgba(136, 136, 136, 0.4); }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body, html { 
            width: 100%; height: 100%; overflow: hidden; 
            background: var(--bg); color: var(--text); 
            font-family: var(--font); cursor: crosshair; touch-action: none;
            transition: 0.3s background-color;
        }

        #bg-canvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

        #auth-overlay {
            position: fixed; inset: 0; z-index: 10000;
            display: flex; align-items: center; justify-content: center;
            background: #000; transition: 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .login-card { background: var(--glass); padding: 40px; border-radius: 30px; border: 1px solid var(--accent); text-align: center; width: 350px; box-shadow: 0 0 50px var(--glow); }
        .login-card h1 { color: var(--accent); letter-spacing: 8px; margin-bottom: 5px; font-size: 26px; font-weight: 900; }
        .login-card input { width: 100%; background: #000; border: 1px solid var(--border); padding: 14px; border-radius: 12px; color: #fff; margin-bottom: 12px; text-align: center; letter-spacing: 2px; }
        .login-card button { width: 100%; padding: 14px; border-radius: 12px; border: none; background: var(--accent); color: #000; font-weight: 900; cursor: pointer; }

        #sidebar {
            position: fixed; left: -250px; top: 50%; transform: translateY(-50%);
            width: 250px; background: var(--glass); border: 1px solid var(--border);
            padding: 25px 20px; border-radius: 0 25px 25px 0; z-index: 2000;
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(20px);
        }
        #sidebar.open { left: 0; box-shadow: 20px 0 50px rgba(0,0,0,0.5); border-right: 2px solid var(--accent); }
        #sidebar-tab {
            position: absolute; right: -40px; top: 50%; transform: translateY(-50%);
            background: var(--accent); color: #000; padding: 15px 8px;
            border-radius: 0 12px 12px 0; cursor: pointer; font-weight: 900; writing-mode: vertical-rl; font-size: 11px;
        }

        #command-list { height: 450px; overflow-y: auto; padding-right: 5px; }
        #command-list::-webkit-scrollbar { width: 3px; }
        #command-list::-webkit-scrollbar-thumb { background: var(--accent); }

        .option-btn { width: 100%; padding: 10px; margin: 4px 0; background: rgba(255,255,255,0.03); border: 1px solid var(--border); color: #fff; border-radius: 8px; font-size: 10px; cursor: pointer; text-align: left; transition: 0.2s; }
        .option-btn:hover { background: rgba(255,255,255,0.08); border-color: var(--accent); transform: translateX(5px); }
        .option-btn.active { background: var(--accent); color: #000; font-weight: bold; }

        #desktop { position: relative; width: 100vw; height: 100vh; z-index: 10; display: none; }
        .window { position: absolute; background: var(--glass); border: 1px solid var(--border); border-radius: 20px; backdrop-filter: blur(20px); box-shadow: 0 15px 40px rgba(0,0,0,0.6); overflow: hidden; display: flex; flex-direction: column; min-width: 300px; }
        .win-header { padding: 12px 18px; background: rgba(255,255,255,0.05); cursor: move; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
        .win-title { font-size: 10px; font-weight: 900; color: var(--accent); text-transform: uppercase; letter-spacing: 2px; }
        .win-close { cursor: pointer; color: #ff5f56; font-size: 20px; }
        .win-content { padding: 20px; flex: 1; }

        .theme-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .theme-btn { padding: 10px; border: 1px solid var(--border); border-radius: 8px; background: rgba(255,255,255,0.05); color: #fff; cursor: pointer; font-size: 10px; text-transform: uppercase; }
        .theme-btn:hover { border-color: var(--accent); background: var(--glow); }

        #taskbar { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); background: var(--glass); border: 1px solid var(--border); padding: 12px 25px; border-radius: 24px; display: flex; gap: 18px; z-index: 1000; }
        .t-icon { width: 52px; height: 52px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.03); border-radius: 16px; cursor: pointer; font-size: 24px; transition: 0.3s; }
        .t-icon:hover { transform: translateY(-12px); background: var(--accent); color: #000; box-shadow: 0 10px 20px var(--glow); }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div id="auth-overlay">
        <div class="login-card">
            <h1>MASON V16</h1>
            <p style="font-size: 10px; opacity: 0.6; margin-bottom: 20px;">ARCHITECT ULTRA 2026</p>
            <input type="password" id="sys-pass" placeholder="ACCESS KEY">
            <button onclick="Mansion.init()">INITIALIZE</button>
        </div>
    </div>

    <div id="desktop">
        <div id="sidebar">
            <div id="sidebar-tab" onclick="document.getElementById('sidebar').classList.toggle('open')">MADNESS LIST</div>
            <div id="command-list">
                <h4 style="font-size: 9px; color: var(--accent); margin-bottom: 10px; letter-spacing: 2px;">30 PHYSICS CMDS</h4>
                <button class="option-btn" id="m-bounce" onclick="Mansion.toggle('bounce')">1. Cursor Bounce</button>
                <button class="option-btn" id="m-cloak" onclick="Mansion.toggle('cloak')">2. Phantom Cloak</button>
                <button class="option-btn" id="m-glade" onclick="Mansion.toggle('glade')">3. Glade Hoppers</button>
                <button class="option-btn active" id="m-float" onclick="Mansion.toggle('float')">4. Neural Drift</button>
                <button class="option-btn" id="m-rgb" onclick="Mansion.toggle('rgb')">5. RGB Madness</button>
                <button class="option-btn" id="m-pulse" onclick="Mansion.toggle('pulse')">6. Heartbeat</button>
                <button class="option-btn" id="m-magnet" onclick="Mansion.toggle('magnet')">7. Singularity</button>
                <button class="option-btn" id="m-trails" onclick="Mansion.toggle('trails')">8. Phantom Trails</button>
                <button class="option-btn" id="m-jitter" onclick="Mansion.toggle('jitter')">9. Static Noise</button>
                <button class="option-btn" id="m-speed" onclick="Mansion.toggle('speed')">10. Light Speed</button>
                <button class="option-btn" id="m-orbit" onclick="Mansion.toggle('orbit')">11. Orbital Path</button>
                <button class="option-btn" id="m-collision" onclick="Mansion.toggle('collision')">12. Bubble Clack</button>
                <button class="option-btn" id="m-vortex" onclick="Mansion.toggle('vortex')">13. Core Vortex</button>
                <button class="option-btn" id="m-mosaic" onclick="Mansion.toggle('mosaic')">14. Grid Snap</button>
                <button class="option-btn" id="m-decay" onclick="Mansion.toggle('decay')">15. Life Timer</button>
                <button class="option-btn" id="m-frenzy" onclick="Mansion.toggle('frenzy')">16. Swarm AI</button>
                <button class="option-btn" id="m-shiver" onclick="Mansion.toggle('shiver')">17. Ice Freeze</button>
                <button class="option-btn" id="m-bloom" onclick="Mansion.toggle('bloom')">18. Glow Bloom</button>
                <button class="option-btn" id="m-invert" onclick="Mansion.toggle('invert')">19. Anti-Matter</button>
                <button class="option-btn" id="m-wave" onclick="Mansion.toggle('wave')">20. Sine Walk</button>
                <button class="option-btn" id="m-heavy" onclick="Mansion.toggle('heavy')">21. Lead Weight</button>
                <button class="option-btn" id="m-storm" onclick="Mansion.toggle('storm')">22. Static Bolt</button>
                <button class="option-btn" id="m-drift" onclick="Mansion.toggle('drift')">23. Wind Gust</button>
                <button class="option-btn" id="m-echo" onclick="Mansion.toggle('echo')">24. Delay Echo</button>
                <button class="option-btn" id="m-prism" onclick="Mansion.toggle('prism')">25. Ray Trace</button>
                <button class="option-btn" id="m-shadow" onclick="Mansion.toggle('shadow')">26. Void Center</button>
                <button class="option-btn" id="m-burst" onclick="Mansion.toggle('burst')">27. Pop Shock</button>
                <button class="option-btn" id="m-weave" onclick="Mansion.toggle('weave')">28. Silk Path</button>
                <button class="option-btn" id="m-gravity" onclick="Mansion.toggle('gravity')">29. Earth Pull</button>
                <button class="option-btn active" style="background:var(--accent); color:#000" onclick="Mansion.chaosBurst()">30. CHAOS OVERLOAD</button>
            </div>
        </div>

        <div id="win-layer"></div>

        <div id="taskbar">
            <div class="t-icon" onclick="Mansion.spawn('games')">üéÆ</div>
            <div class="t-icon" onclick="Mansion.spawn('themes')">üé®</div>
            <div class="t-icon" onclick="Mansion.spawn('settings')">‚öôÔ∏è</div>
            <div id="owner-icon" class="t-icon hidden" onclick="Mansion.spawnOwnerPanel()">üëë</div>
        </div>
    </div>

    <script>
        const Mansion = {
            rank: 'guest', orbs: [], mouse: { x: -1000, y: -1000 },
            config: { count: 80, speed: 2, size: 4, glow: 15, color: '#ffcc33' },
            mods: { float: true, bounce: false, cloak: false, glade: false, rgb: false, pulse: false, magnet: false, trails: false, jitter: false, speed: false, orbit: false },

            init() {
                const p = document.getElementById('sys-pass').value;
                if(p === "masononly69") { this.rank = "OWNER"; document.getElementById('owner-icon').classList.remove('hidden'); this.boot(); }
                else if(p === "honey") { this.rank = "MEMBER"; this.boot(); }
                else { alert("ACCESS DENIED"); }
            },

            boot() {
                document.getElementById('auth-overlay').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('auth-overlay').style.display = 'none';
                    document.getElementById('desktop').style.display = 'block';
                    this.setupCanvas();
                    this.loop();
                }, 800);
            },

            setupCanvas() {
                this.canvas = document.getElementById('bg-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.resize();
                window.addEventListener('resize', () => this.resize());
                window.addEventListener('mousemove', (e) => { this.mouse.x = e.clientX; this.mouse.y = e.clientY; });
                this.refreshOrbs();
            },

            resize() { this.canvas.width = window.innerWidth; this.canvas.height = window.innerHeight; },

            refreshOrbs() {
                this.orbs = [];
                for(let i=0; i < this.config.count; i++) this.orbs.push(this.createOrb());
            },

            createOrb() {
                return {
                    x: Math.random() * innerWidth, y: Math.random() * innerHeight,
                    vx: (Math.random() - 0.5) * this.config.speed,
                    vy: (Math.random() - 0.5) * this.config.speed,
                    r: Math.random() * this.config.size + 2,
                    a: Math.random() * Math.PI * 2
                };
            },

            toggle(mod) {
                this.mods[mod] = !this.mods[mod];
                const btn = document.getElementById(`m-${mod}`);
                if(btn) btn.classList.toggle('active');
            },

            setTheme(t) {
                document.body.className = t === 'honey' ? '' : 'theme-' + t;
                setTimeout(() => {
                    this.config.color = getComputedStyle(document.body).getPropertyValue('--accent').trim();
                }, 50);
            },

            chaosBurst() { for(let i=0; i<30; i++) this.orbs.push(this.createOrb()); },

            spawn(type) {
                if(type === 'themes') {
                    const id = 'win-themes';
                    if(document.getElementById(id)) return;
                    const win = document.createElement('div');
                    win.className = 'window'; win.id = id;
                    win.style.cssText = "width:280px; left:50%; top:50%; transform:translate(-50%,-50%);";
                    win.innerHTML = `
                        <div class="win-header" onmousedown="Mansion.dragStart(event, '${id}')">
                            <span class="win-title">THEME ENGINE</span>
                            <span class="win-close" onclick="this.parentElement.parentElement.remove()">√ó</span>
                        </div>
                        <div class="win-content theme-grid">
                            <button class="theme-btn" onclick="Mansion.setTheme('honey')">Honey Gold</button>
                            <button class="theme-btn" onclick="Mansion.setTheme('blue')">Blue Nova</button>
                            <button class="theme-btn" onclick="Mansion.setTheme('red')">Red Fury</button>
                            <button class="theme-btn" onclick="Mansion.setTheme('glitch')">Glitch Core</button>
                            <button class="theme-btn" onclick="Mansion.setTheme('cyber')">Cyber Wave</button>
                            <button class="theme-btn" onclick="Mansion.setTheme('volcano')">Volcano</button>
                            <button class="theme-btn" onclick="Mansion.setTheme('ash')">Ash Decay</button>
                        </div>
                    `;
                    document.getElementById('win-layer').appendChild(win);
                }
            },

            spawnOwnerPanel() {
                const id = 'owner-panel';
                if(document.getElementById(id)) return;
                const win = document.createElement('div');
                win.className = 'window'; win.id = id;
                win.style.cssText = "width:320px; right:30px; top:30px; border:1px solid var(--accent);";
                win.innerHTML = `
                    <div class="win-header" onmousedown="Mansion.dragStart(event, '${id}')">
                        <span class="win-title">üëë ARCHITECT CONTROL</span>
                        <span class="win-close" onclick="this.parentElement.parentElement.remove()">√ó</span>
                    </div>
                    <div class="win-content">
                        <label style="font-size:9px; color:var(--accent)">POPULATION</label>
                        <input type="range" min="10" max="500" value="${this.config.count}" oninput="Mansion.updateConfig('count', this.value)">
                        <label style="font-size:9px; color:var(--accent)">GLOW POWER</label>
                        <input type="range" min="0" max="100" value="${this.config.glow}" oninput="Mansion.updateConfig('glow', this.value)">
                        <button class="option-btn active" style="margin-top:15px; text-align:center;" onclick="Mansion.refreshOrbs()">REGENERATE WORLD</button>
                    </div>
                `;
                document.getElementById('win-layer').appendChild(win);
            },

            updateConfig(k, v) { this.config[k] = parseFloat(v); if(k === 'count') this.refreshOrbs(); },

            dragStart(e, id) {
                const el = document.getElementById(id);
                let ox = e.clientX - el.offsetLeft, oy = e.clientY - el.offsetTop;
                window.onmousemove = (e) => { el.style.left = (e.clientX - ox) + 'px'; el.style.top = (e.clientY - oy) + 'px'; };
                window.onmouseup = () => window.onmousemove = null;
            },

            loop() {
                this.ctx.fillStyle = this.mods.trails ? 'rgba(5, 4, 0, 0.15)' : '#050400';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                this.orbs.forEach(o => {
                    let dx = this.mouse.x - o.x, dy = this.mouse.y - o.y;
                    let dist = Math.sqrt(dx*dx + dy*dy);

                    if(this.mods.bounce && dist < 120) {
                        let angle = Math.atan2(dy, dx);
                        o.vx -= Math.cos(angle) * 0.8; o.vy -= Math.sin(angle) * 0.8;
                    }

                    if(this.mods.glade && Math.random() > 0.997) {
                        o.x = Math.random() * innerWidth; o.y = Math.random() * innerHeight;
                    }

                    if(this.mods.magnet && dist < 400) { o.vx += dx * 0.001; o.vy += dy * 0.001; }
                    if(this.mods.float) { o.x += o.vx; o.y += o.vy; }
                    if(this.mods.orbit) { o.a += 0.02; o.x += Math.cos(o.a) * 2; o.y += Math.sin(o.a) * 2; }
                    if(this.mods.jitter) { o.x += (Math.random()-0.5)*10; o.y += (Math.random()-0.5)*10; }

                    if(o.x < 0) o.x = innerWidth; if(o.x > innerWidth) o.x = 0;
                    if(o.y < 0) o.y = innerHeight; if(o.y > innerHeight) o.y = 0;

                    let opac = this.mods.cloak ? Math.min(dist / 400, 1) : 1;
                    this.ctx.globalAlpha = opac;
                    this.ctx.shadowBlur = this.config.glow;
                    this.ctx.shadowColor = this.mods.rgb ? `hsl(${Date.now()/10 % 360}, 100%, 50%)` : this.config.color;
                    
                    this.ctx.beginPath();
                    this.ctx.arc(o.x, o.y, o.r * (this.mods.pulse ? Math.sin(Date.now()/200)*2+2 : 1), 0, Math.PI*2);
                    this.ctx.fillStyle = this.mods.rgb ? `hsl(${Date.now()/10 % 360}, 80%, 60%)` : this.config.color;
                    this.ctx.fill();
                });
                this.ctx.globalAlpha = 1;
                requestAnimationFrame(() => this.loop());
            }
        };
    </script>
</body>
</html>
