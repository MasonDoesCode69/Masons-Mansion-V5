<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | V13 Honey Perfect</title>
    <!-- Matter.js for Physics Engine -->
    <script src="cdnjs.cloudflare.com"></script>
    <style>
        :root {
            --bg: #050400;
            --accent: #ffcc33;
            --glow: rgba(255, 204, 51, 0.35);
            --glass: rgba(15, 12, 5, 0.85);
            --border: rgba(255, 204, 51, 0.25);
            --text: #ffffff;
            --font: 'Segoe UI', system-ui, sans-serif;
        }

        * { cursor: none !important; box-sizing: border-box; }

        body { 
            background: var(--bg); 
            color: var(--text); 
            font-family: var(--font); 
            margin: 0; 
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
        }

        /* --- PHYSICS BACKGROUND --- */
        #physics-container {
            position: fixed; inset: 0; z-index: -1; pointer-events: none;
        }

        /* --- CUSTOM CURSOR --- */
        #cursor-glow {
            position: fixed; width: 450px; height: 450px;
            background: radial-gradient(circle, var(--glow) 0%, transparent 70%);
            pointer-events: none; z-index: 10001; transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }
        #cursor-dot {
            position: fixed; width: 6px; height: 6px; background: var(--accent);
            border-radius: 50%; pointer-events: none; z-index: 10002;
            transform: translate(-50%, -50%); box-shadow: 0 0 15px var(--accent);
        }

        /* --- AUTH SCREEN --- */
        #auth-overlay {
            position: fixed; inset: 0; z-index: 10000;
            display: flex; align-items: center; justify-content: center;
            background: #000; transition: 1s ease-in-out;
        }
        .login-card { 
            background: var(--glass); padding: 40px; border-radius: 30px; 
            border: 1px solid var(--accent); text-align: center; width: 350px; 
            box-shadow: 0 0 50px rgba(0,0,0,1); backdrop-filter: blur(20px);
        }
        .login-card h1 { color: var(--accent); letter-spacing: 5px; margin-bottom: 5px; font-size: 24px; text-shadow: 0 0 10px var(--glow); }
        .credits { font-size: 10px; opacity: 0.6; margin-bottom: 25px; letter-spacing: 2px; text-transform: uppercase; }
        .login-card input { width: 100%; background: #000; border: 1px solid var(--border); padding: 12px; border-radius: 12px; color: #fff; margin-bottom: 15px; text-align: center; outline: none; }
        .login-card button { width: 100%; padding: 15px; border-radius: 12px; border: none; background: var(--accent); color: #000; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        .login-card button:hover { box-shadow: 0 0 20px var(--accent); transform: scale(1.02); }

        /* --- SIDEBAR (MADNESS LIST) --- */
        #sidebar {
            position: fixed; left: -250px; top: 50%; transform: translateY(-50%);
            width: 250px; background: var(--glass); border: 1px solid var(--border);
            padding: 20px; border-radius: 0 25px 25px 0; z-index: 2000;
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(15px);
        }
        #sidebar.open { left: 0; box-shadow: 15px 0 40px rgba(0,0,0,0.6); border-right: 2px solid var(--accent); }
        #sidebar-tab {
            position: absolute; right: -42px; top: 50%; transform: translateY(-50%);
            background: var(--accent); color: #000; padding: 15px 10px;
            border-radius: 0 12px 12px 0; cursor: pointer; font-weight: 900; writing-mode: vertical-rl; font-size: 11px;
        }

        .option-btn { width: 100%; padding: 12px; margin: 6px 0; background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: #fff; border-radius: 10px; font-size: 12px; cursor: pointer; text-align: left; transition: 0.2s; }
        .option-btn:hover { background: var(--accent); color: #000; font-weight: bold; }

        /* --- WINDOWS --- */
        #desktop { position: relative; width: 100vw; height: 100vh; z-index: 10; display: none; }
        .window { 
            position: absolute; background: var(--glass); border: 1px solid var(--border); 
            border-radius: 20px; backdrop-filter: blur(25px); 
            box-shadow: 0 15px 40px rgba(0,0,0,0.6); overflow: hidden; 
            display: flex; flex-direction: column; min-width: 400px;
        }
        .win-header { padding: 15px; background: rgba(255,255,255,0.05); cursor: move; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); }
        .win-title { font-size: 11px; font-weight: bold; color: var(--accent); text-transform: uppercase; letter-spacing: 1.5px; }
        .win-close { cursor: pointer; color: #ff5f56; font-size: 22px; line-height: 1; }
        .win-content { flex-grow: 1; background: #000; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }

        /* --- TASKBAR --- */
        #taskbar { 
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); 
            background: var(--glass); border: 1px solid var(--border); 
            padding: 12px 25px; border-radius: 25px; display: flex; gap: 20px; 
            z-index: 1000; backdrop-filter: blur(20px);
        }
        .t-icon { 
            width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; 
            background: rgba(255,255,255,0.03); border-radius: 15px; cursor: pointer; 
            font-size: 24px; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .t-icon:hover { transform: translateY(-12px) scale(1.2); background: var(--accent); color: #000; box-shadow: 0 5px 25px var(--glow); }
    </style>
</head>
<body>

    <div id="cursor-glow"></div>
    <div id="cursor-dot"></div>
    <div id="physics-container"></div>

    <div id="auth-overlay">
        <div class="login-card">
            <h1>MASON'S MANSION</h1>
            <div class="credits">HONEY PERFECT | V13</div>
            <input type="password" id="pass" placeholder="ACCESS CODE">
            <button onclick="login()">Enter Mansion</button>
        </div>
    </div>

    <div id="sidebar">
        <div id="sidebar-tab" onclick="toggleSidebar()">MADNESS LIST</div>
        <p style="font-size: 10px; color: var(--accent); opacity: 0.8;">ARCADE & TOOLS</p>
        <button class="option-btn" onclick="openGame()">‚öîÔ∏è Gladihoppers</button>
        <button class="option-btn" onclick="spawnSquare()">üì¶ Spawn Physics Box</button>
        <button class="option-btn" onclick="location.reload()">üîÑ Refresh System</button>
    </div>

    <div id="desktop">
        <div id="win-gladi" class="window" style="width: 900px; height: 600px; left: 20%; top: 15%; display: none;">
            <div class="win-header">
                <span class="win-title">Gladihoppers v1.2</span>
                <span class="win-close" onclick="closeGame()">‚óè</span>
            </div>
            <div class="win-content">
                <iframe id="game-frame" src=""></iframe>
            </div>
        </div>
    </div>

    <div id="taskbar">
        <div class="t-icon" onclick="toggleSidebar()">‚ò∞</div>
        <div class="t-icon" onclick="openGame()">‚öîÔ∏è</div>
        <div class="t-icon" onclick="spawnSquare()">‚ú®</div>
    </div>

    <script>
        // --- CURSOR LOGIC ---
        const glow = document.getElementById('cursor-glow');
        const dot = document.getElementById('cursor-dot');
        document.addEventListener('mousemove', (e) => {
            glow.style.left = e.clientX + 'px';
            glow.style.top = e.clientY + 'px';
            dot.style.left = e.clientX + 'px';
            dot.style.top = e.clientY + 'px';
        });

        // --- AUTH & UI ---
        function login() {
            document.getElementById('auth-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('auth-overlay').style.display = 'none';
                document.getElementById('desktop').style.display = 'block';
            }, 1000);
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        function openGame() {
            const win = document.getElementById('win-gladi');
            const iframe = document.getElementById('game-frame');
            win.style.display = 'flex';
            if(!iframe.src) iframe.src = "gladihoppers.com"; // Official/Standard URL
        }

        function closeGame() {
            document.getElementById('win-gladi').style.display = 'none';
            document.getElementById('game-frame').src = ""; // Kill process/audio
        }

        // --- PHYSICS ENGINE (Matter.js) ---
        const Engine = Matter.Engine,
              Render = Matter.Render,
              Runner = Matter.Runner,
              Bodies = Matter.Bodies,
              Composite = Matter.Composite;

        const engine = Engine.create();
        const render = Render.create({
            element: document.getElementById('physics-container'),
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: 'transparent'
            }
        });

        // Ground & Walls (Invisible)
        const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight + 25, window.innerWidth, 50, { isStatic: true });
        const leftWall = Bodies.rectangle(-25, window.innerHeight/2, 50, window.innerHeight, { isStatic: true });
        const rightWall = Bodies.rectangle(window.innerWidth + 25, window.innerHeight/2, 50, window.innerHeight, { isStatic: true });
        Composite.add(engine.world, [ground, leftWall, rightWall]);

        function spawnSquare() {
            const size = Math.random() * 30 + 20;
            const square = Bodies.rectangle(
                Math.random() * window.innerWidth, 
                -50, 
                size, size, 
                { 
                    render: { 
                        fillStyle: 'transparent', 
                        strokeStyle: '#ffcc33', 
                        lineWidth: 2 
                    },
                    friction: 0.5,
                    restitution: 0.7 
                }
            );
            Composite.add(engine.world, square);
        }

        // Start Physics
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Resize Fix
        window.addEventListener('resize', () => {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            Matter.Body.setPosition(ground, { x: window.innerWidth/2, y: window.innerHeight + 25 });
        });

        // Auto-spawn a few squares
        for(let i=0; i<10; i++) setTimeout(spawnSquare, i * 300);
    </script>
</body>
</html>
