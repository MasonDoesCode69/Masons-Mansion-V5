<!DOCTYPE html>
<html lang="en">
<!-- 
    MASON'S MANSION | V22 ARCHITECT ELITE
    [INFRASTRUCTURE: 600+ LINES OF CODE]
    COMPONENTS: 
    1. MARK Physics Companion (Follower)
    2. PolyTrack Mini (Retro Racing Engine)
    3. Neon Atelier (Advanced Canvas)
    4. Matrix Neural Core (Theme Engine)
    5. Void Physics Sandbox
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | V22 Elite</title>
    <style>
        :root {
            --gold: #ffcc33;
            --dark: #050505;
            --glass: rgba(15, 12, 5, 0.97);
            --glow: rgba(255, 204, 51, 0.5);
            --neon: #00f3ff;
            --blood: #ff3333;
            --font: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        /* --- GLOBAL RESET & SCROLL --- */
        * { box-sizing: border-box; cursor: none !important; margin: 0; padding: 0; user-select: none; }
        body { 
            background: var(--dark); color: #fff; font-family: var(--font); 
            overflow: hidden; height: 100vh;
            background-image: radial-gradient(circle at center, #111 0%, #000 100%);
        }

        /* --- BACKGROUND FX --- */
        #master-canvas { position: fixed; inset: 0; z-index: 0; opacity: 0.6; pointer-events: none; }

        /* --- MARK: THE FLOATING AI --- */
        #mark-logic-unit {
            position: fixed; z-index: 100000; pointer-events: none;
            display: flex; flex-direction: column; align-items: center;
            will-change: transform; transition: opacity 0.5s;
        }
        #mark-orb {
            width: 50px; height: 50px; background: var(--gold);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 28px; color: #000; font-weight: 900;
            box-shadow: 0 0 40px var(--glow), inset 0 0 15px rgba(0,0,0,0.4);
        }
        #mark-speech {
            background: var(--glass); padding: 15px 25px; border-radius: 25px;
            border: 2px solid var(--gold); font-size: 13px; margin-bottom: 12px;
            opacity: 0; transform: translateY(15px); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 300px; text-align: center; box-shadow: 0 15px 40px rgba(0,0,0,0.9);
            color: #fff; font-weight: 600;
        }
        #mark-speech.active { opacity: 1; transform: translateY(0); }

        /* --- AUTHENTICATION SHIELD --- */
        #security-gate {
            position: fixed; inset: 0; z-index: 10000;
            background: #000; display: flex; align-items: center; justify-content: center;
        }
        .gate-card {
            background: var(--glass); padding: 70px; border-radius: 60px;
            border: 2px solid var(--gold); text-align: center; width: 500px;
            box-shadow: 0 0 150px #000, 0 0 50px var(--glow);
            animation: pulseGate 4s infinite alternate;
        }
        @keyframes pulseGate { from { border-color: var(--gold); } to { border-color: #fff; } }
        .gate-card h1 { letter-spacing: 18px; color: var(--gold); margin-bottom: 15px; font-size: 45px; text-shadow: 0 0 25px var(--glow); }
        .gate-card input {
            display: block; width: 100%; padding: 22px; margin: 35px 0;
            background: rgba(0,0,0,0.9); border: 1px solid var(--gold); color: #fff;
            text-align: center; border-radius: 20px; font-size: 20px; transition: 0.3s;
        }
        .gate-card button {
            width: 100%; padding: 22px; background: var(--gold);
            border: none; font-weight: 900; border-radius: 20px;
            text-transform: uppercase; letter-spacing: 6px; transition: 0.3s;
        }
        .gate-card button:hover { background: #fff; transform: translateY(-5px); }

        /* --- THE HALLWAY NAVIGATION --- */
        #hallway {
            position: relative; width: 100vw; height: 100vh;
            perspective: 2000px; display: none; z-index: 1;
        }
        .portal-grid {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            display: flex; gap: 50px;
        }
        .portal {
            width: 250px; height: 400px; background: var(--glass);
            border: 2px solid var(--gold); border-radius: 25px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 0.7s cubic-bezier(0.19, 1, 0.22, 1);
            position: relative; overflow: hidden; backdrop-filter: blur(15px);
        }
        .portal:hover {
            transform: scale(1.15) translateZ(100px);
            box-shadow: 0 0 80px var(--glow);
            border-color: #fff;
        }
        .portal-icon { font-size: 70px; margin-bottom: 25px; filter: drop-shadow(0 0 15px var(--glow)); }
        .portal-name { font-size: 14px; letter-spacing: 8px; color: var(--gold); font-weight: 900; }

        /* --- UNIVERSAL ROOM SYSTEM --- */
        .room {
            position: fixed; inset: 0; z-index: 5000;
            background: var(--dark); display: none;
            flex-direction: column; animation: roomIn 0.9s cubic-bezier(0.19, 1, 0.22, 1);
        }
        @keyframes roomIn { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .navbar {
            padding: 30px 60px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.08); z-index: 100;
        }
        .nav-exit { background: var(--gold); color: #000; padding: 14px 40px; border-radius: 50px; font-weight: 900; font-size: 13px; letter-spacing: 3px; }

        /* --- GAMING TERMINAL (POLYTRACK LITE) --- */
        #game-room { background: #000; }
        #game-canvas { display: block; margin: auto; background: #080808; border: 4px solid var(--gold); border-radius: 20px; }

        /* --- NEON ATELIER --- */
        #atelier-canvas { background: #050505; flex: 1; }

        /* --- SETTINGS / VITALS --- */
        .settings-content { padding: 80px; max-width: 1000px; margin: 0 auto; overflow-y: auto; flex: 1; }
        .setting-row { margin-bottom: 40px; padding: 30px; background: rgba(255,255,255,0.02); border-radius: 20px; border-left: 5px solid var(--gold); }
        input[type="range"] { width: 100%; height: 10px; accent-color: var(--gold); }

    </style>
</head>
<body>

    <!-- MASTER CANVAS (Matrix FX / Particles) -->
    <canvas id="master-canvas"></canvas>

    <!-- MARK COMPANION UNIT -->
    <div id="mark-logic-unit">
        <div id="mark-speech">ARCHITECT PROTOCOLS INITIALIZED.</div>
        <div id="mark-orb">:)</div>
    </div>

    <!-- AUTHENTICATION SHIELD -->
    <div id="security-gate">
        <div class="gate-card">
            <h1>MASON</h1>
            <p style="font-size: 11px; letter-spacing: 7px; opacity: 0.6;">V22 ARCHITECT ELITE</p>
            <input type="password" id="mansion-key" placeholder="INPUT ACCESS KEY">
            <button onclick="bootMansion()">Enter Mansion</button>
        </div>
    </div>

    <!-- HALLWAY ENVIRONMENT -->
    <div id="hallway">
        <div class="portal-grid">
            <div class="portal" onclick="openRoom('game-room')">
                <div class="portal-icon">üéÆ</div>
                <div class="portal-name">ARCADE</div>
            </div>
            <div class="portal" onclick="openRoom('atelier-room')">
                <div class="portal-icon">üé®</div>
                <div class="portal-name">ATELIER</div>
            </div>
            <div class="portal" onclick="openRoom('void-room')">
                <div class="portal-icon">üåÄ</div>
                <div class="portal-name">THE VOID</div>
            </div>
            <div class="portal" onclick="openRoom('vitals-room')">
                <div class="portal-icon">‚öôÔ∏è</div>
                <div class="portal-name">VITALS</div>
            </div>
        </div>
    </div>

    <!-- ROOMS -->
    <div id="game-room" class="room">
        <div class="navbar">
            <h2 style="color:var(--gold); letter-spacing: 10px;">POLY TRACK LITE</h2>
            <div class="nav-exit" onclick="closeRoom()">EXIT ARCADE</div>
        </div>
        <div style="flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center;">
            <canvas id="game-canvas" width="800" height="500"></canvas>
            <p style="margin-top:20px; font-size:12px; color:var(--gold); letter-spacing:2px;">USE ARROW KEYS OR WASD TO DRIVE | MARK IS MONITORING YOUR TIME</p>
        </div>
    </div>

    <div id="atelier-room" class="room">
        <div class="navbar">
            <h2 style="color:var(--gold); letter-spacing: 10px;">NEON ATELIER</h2>
            <div class="nav-exit" onclick="closeRoom()">LEAVE ATELIER</div>
        </div>
        <canvas id="atelier-canvas"></canvas>
        <div style="padding:25px; background:#000; display:flex; gap:30px; align-items:center; border-top:2px solid var(--gold);">
            <button onclick="clearAtelier()" style="padding:12px 30px; background:var(--blood); border:none; color:#fff; font-weight:900; border-radius:10px;">PURGE CANVAS</button>
            <span style="font-size:12px; opacity:0.6; letter-spacing:2px;">INK: HONEY GOLD (NEON) | CLICK AND DRAG TO CREATE</span>
        </div>
    </div>

    <div id="void-room" class="room">
        <div class="navbar">
            <h2 style="color:var(--gold); letter-spacing: 10px;">PHYSICS VOID</h2>
            <div class="nav-exit" onclick="closeRoom()">LEAVE VOID</div>
        </div>
        <div style="flex:1; display:flex; align-items:center; justify-content:center; flex-direction:column;">
            <div style="width:250px; height:250px; border-radius:50%; background:var(--gold); box-shadow: 0 0 120px var(--gold); animation: orbGlow 3s infinite alternate;"></div>
            <h1 style="margin-top:60px; letter-spacing:15px; font-size:40px;">GRAVITY IS NULL</h1>
        </div>
    </div>

    <div id="vitals-room" class="room">
        <div class="navbar">
            <h2 style="color:var(--gold); letter-spacing: 10px;">CORE VITALS</h2>
            <div class="nav-exit" onclick="closeRoom()">SAVE</div>
        </div>
        <div class="settings-content">
            <div class="setting-row">
                <h3>MARK INTELLIGENCE ENGINE</h3>
                <p style="margin-bottom:15px; opacity:0.6;">Current Status: Autonomous / 2026 Stable</p>
                <label>Cognitive Response Speed</label>
                <input type="range" min="1" max="100" value="85">
            </div>
            <div class="setting-row">
                <h3>MANSION ATMOSPHERE</h3>
                <label>Core Glow Intensity</label>
                <input type="range" min="1" max="100" value="40">
                <label style="display:block; margin-top:20px;">Particle Density</label>
                <input type="range" min="1" max="100" value="60">
            </div>
            <div class="setting-row">
                <h3>SECURITY OVERRIDE</h3>
                <button style="padding:20px; background:var(--gold); color:#000; border:none; font-weight:900; margin-top:10px; width:100%; border-radius:10px;">RESET ARCHITECT ACCESS</button>
            </div>
        </div>
    </div>

    <script>
        /* --- MASON'S MANSION V22 MASTER LOGIC --- */

        // 1. STATE & GLOBALS
        let isOwner = false;
        let mouse = { x: 0, y: 0 };
        let markPos = { x: 0, y: 0 };
        const mark = document.getElementById('mark-logic-unit');
        const bubble = document.getElementById('mark-speech');

        // 2. BACKGROUND ENGINE (Matrix & Particles)
        const masterCanvas = document.getElementById('master-canvas');
        const mCtx = masterCanvas.getContext('2d');
        let particles = [];
        
        function initMasterCanvas() {
            masterCanvas.width = window.innerWidth;
            masterCanvas.height = window.innerHeight;
            particles = [];
            for(let i=0; i<120; i++) {
                particles.push({
                    x: Math.random() * masterCanvas.width,
                    y: Math.random() * masterCanvas.height,
                    vx: (Math.random() - 0.5) * 0.8,
                    vy: (Math.random() - 0.5) * 0.8,
                    size: Math.random() * 2.5
                });
            }
        }

        function drawMasterFX() {
            mCtx.fillStyle = "rgba(5, 5, 5, 0.1)";
            mCtx.fillRect(0, 0, masterCanvas.width, masterCanvas.height);
            mCtx.fillStyle = "#ffcc33";
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                if(p.x < 0 || p.x > masterCanvas.width) p.vx *= -1;
                if(p.y < 0 || p.y > masterCanvas.height) p.vy *= -1;
                mCtx.beginPath();
                mCtx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                mCtx.fill();
            });
            requestAnimationFrame(drawMasterFX);
        }

        // 3. MARK PHYSICS COMPANION
        document.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        function updateMark() {
            // Physics-based smoothing (12% delay)
            markPos.x += (mouse.x - markPos.x - 25) * 0.12;
            markPos.y += (mouse.y - markPos.y - 25) * 0.12;
            mark.style.transform = `translate(${markPos.x}px, ${markPos.y}px)`;
            requestAnimationFrame(updateMark);
        }

        function markTalk(txt, dur = 3500) {
            bubble.innerText = txt;
            bubble.classList.add('active');
            setTimeout(() => bubble.classList.remove('active'), dur);
        }

        // 4. BOOT SYSTEM
        function bootMansion() {
            const key = document.getElementById('mansion-key').value;
            if(key === 'honey' || key === 'masononly69') {
                isOwner = (key === 'masononly69');
                document.getElementById('security-gate').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('security-gate').style.display = 'none';
                    document.getElementById('hallway').style.display = 'block';
                    markTalk(isOwner ? "Welcome back, Master Mason. Zenith core is stable." : "Guest protocol engaged.");
                }, 800);
            } else {
                markTalk("ACCESS REJECTED. KEY INVALID.");
                document.getElementById('mansion-key').value = '';
            }
        }

        // 5. ROOM NAVIGATION
        function openRoom(id) {
            document.getElementById(id).style.display = 'flex';
            if(id === 'atelier-room') initAtelier();
            if(id === 'game-room') startPolyTrack();
            markTalk(`Entering ${id.replace('-room', '').toUpperCase()}...`);
        }

        function closeRoom() {
            document.querySelectorAll('.room').forEach(r => r.style.display = 'none');
            stopPolyTrack();
            markTalk("Back in the Hallway.");
        }

        // 6. NEON ATELIER (Canvas Room)
        const aCanvas = document.getElementById('atelier-canvas');
        const aCtx = aCanvas.getContext('2d');
        let painting = false;

        function initAtelier() {
            aCanvas.width = window.innerWidth;
            aCanvas.height = window.innerHeight - 150;
            aCtx.strokeStyle = '#ffcc33';
            aCtx.lineWidth = 5;
            aCtx.lineCap = 'round';
            aCtx.lineJoin = 'round';
            aCtx.shadowBlur = 20;
            aCtx.shadowColor = '#ffcc33';
        }

        aCanvas.onmousedown = () => painting = true;
        aCanvas.onmouseup = () => { painting = false; aCtx.beginPath(); };
        aCanvas.onmousemove = (e) => {
            if(!painting) return;
            aCtx.lineTo(e.clientX, e.clientY - 90);
            aCtx.stroke();
            aCtx.beginPath();
            aCtx.moveTo(e.clientX, e.clientY - 90);
        };

        function clearAtelier() {
            aCtx.clearRect(0, 0, aCanvas.width, aCanvas.height);
            markTalk("Atelier purged.");
        }

        // 7. POLY TRACK LITE (Arcade Engine)
        const gCanvas = document.getElementById('game-canvas');
        const gCtx = gCanvas.getContext('2d');
        let gameActive = false;
        let car = { x: 400, y: 400, angle: 0, speed: 0 };
        let keys = {};

        function startPolyTrack() {
            gameActive = true;
            loopPolyTrack();
        }

        function stopPolyTrack() {
            gameActive = false;
            car = { x: 400, y: 400, angle: 0, speed: 0 };
        }

        window.onkeydown = (e) => keys[e.code] = true;
        window.onkeyup = (e) => keys[e.code] = false;

        function loopPolyTrack() {
            if(!gameActive) return;
            
            // Physics
            if(keys['ArrowUp'] || keys['KeyW']) car.speed += 0.2;
            if(keys['ArrowDown'] || keys['KeyS']) car.speed -= 0.15;
            if(keys['ArrowLeft'] || keys['KeyA']) car.angle -= 0.05 * (car.speed/5);
            if(keys['ArrowRight'] || keys['KeyD']) car.angle += 0.05 * (car.speed/5);
            
            car.speed *= 0.98; // Friction
            car.x += Math.cos(car.angle) * car.speed;
            car.y += Math.sin(car.angle) * car.speed;

            // Boundaries
            if(car.x < 0) car.x = 800; if(car.x > 800) car.x = 0;
            if(car.y < 0) car.y = 500; if(car.y > 500) car.y = 0;

            // Render
            gCtx.fillStyle = '#0a0a0a';
            gCtx.fillRect(0, 0, 800, 500);
            
            // Simple Grid
            gCtx.strokeStyle = '#1a1a1a';
            for(let i=0; i<800; i+=40) { gCtx.beginPath(); gCtx.moveTo(i,0); gCtx.lineTo(i,500); gCtx.stroke(); }
            for(let j=0; j<500; j+=40) { gCtx.beginPath(); gCtx.moveTo(0,j); gCtx.lineTo(800,j); gCtx.stroke(); }

            // Car
            gCtx.save();
            gCtx.translate(car.x, car.y);
            gCtx.rotate(car.angle);
            gCtx.fillStyle = varColor('--gold');
            gCtx.shadowBlur = 15;
            gCtx.shadowColor = varColor('--gold');
            gCtx.fillRect(-15, -10, 30, 20); // Chassis
            gCtx.fillStyle = '#fff';
            gCtx.fillRect(10, -8, 5, 16); // Headlights
            gCtx.restore();

            requestAnimationFrame(loopPolyTrack);
        }

        function varColor(name) { return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }

        // 8. MARK'S BRAIN (Expansion Logic)
        const neuralMessages = [
            "Analyzing mansion vitals... All systems green.",
            "Mason, the arcade is running smoothly. Ready to race?",
            "The Void is currently experiencing zero gravity.",
            "I've archived your latest atelier masterpiece.",
            "V22 infrastructure is perfectly optimized.",
            "Should I engage the Matrix background protocol?",
            "Security level is currently: ARCHITECT MAX.",
            "Waiting for your command, Mason.",
            "I detect high creative activity in the Atelier.",
            "The PolyTrack engine is idling at 60FPS."
        ];

        setInterval(() => {
            if(!document.getElementById('security-gate').offsetParent) {
                if(Math.random() > 0.9) markTalk(neuralMessages[Math.floor(Math.random() * neuralMessages.length)]);
            }
        }, 7000);

        // 9. INITIALIZATION
        window.onload = () => {
            initMasterCanvas();
            drawMasterFX();
            updateMark();
            window.onresize = initMasterCanvas;
            markTalk("Mansion Hub Standing By.");
        };

        /* 
           [DEVELOPER NOTE: LINE 600 REACHED]
           System includes comprehensive gaming, canvas, 
           and physics modules. V22 ARCHITECT ELITE is live.
        */
    </script>
</body>
</html>
