<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | V17.2026 Architect</title>
    <style>
        :root {
            --bg: #010103; --accent: #ffcc33; --glow: rgba(255, 204, 51, 0.4);
            --glass: rgba(15, 15, 20, 0.85); --border: rgba(255, 255, 255, 0.1);
            --font-main: 'Orbitron', sans-serif; --font-mono: 'JetBrains Mono', monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: var(--bg); color: #fff; font-family: 'Segoe UI', sans-serif; cursor: crosshair; }
        
        /* --- M.A.R.K UI --- */
        #ai-interface { position: fixed; top: 150px; left: 40px; width: 380px; z-index: 2000; }
        #mark-face { width: 100px; height: 100px; border: 4px solid var(--accent); border-radius: 50%; margin-bottom: 30px; position: relative; box-shadow: 0 0 40px var(--glow); background: #000; }
        .eye-socket { width: 25px; height: 25px; background: rgba(0,0,0,0.5); border-radius: 50%; position: absolute; top: 30px; overflow: hidden; border: 1px solid var(--border); }
        .eye-socket.left { left: 20px; } .eye-socket.right { right: 20px; }
        .pupil { width: 10px; height: 10px; background: var(--accent); border-radius: 50%; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); transition: 0.1s ease-out; box-shadow: 0 0 10px var(--accent); }
        #mouth { width: 35px; height: 12px; border-bottom: 4px solid var(--accent); border-radius: 0 0 25px 25px; position: absolute; bottom: 25px; left: 33px; }
        #ai-bubble { background: var(--glass); border: 1px solid var(--border); padding: 25px; border-radius: 15px; font-size: 13px; font-family: var(--font-mono); color: #eee; margin-bottom: 15px; border-left: 5px solid var(--accent); backdrop-filter: blur(20px); }
        #ai-input { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--border); padding: 15px; color: var(--accent); font-family: var(--font-mono); border-radius: 12px; }

        /* --- AUTH SCREEN --- */
        #auth-wrap { position: fixed; inset: 0; z-index: 9999; display: flex; align-items: center; justify-content: center; background: #000; }
        .login-box { width: 400px; padding: 40px; background: var(--glass); border: 1px solid var(--border); text-align: center; border-radius: 20px; }
        .login-box input { width: 100%; background: #000; border: 1px solid var(--border); padding: 15px; color: var(--accent); margin-bottom: 20px; border-radius: 10px; text-align: center; }
        .login-btn { width: 100%; padding: 15px; background: var(--accent); color: #000; font-weight: bold; border: none; cursor: pointer; border-radius: 10px; }

        /* --- GAMES --- */
        .c4-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; padding: 15px; background: #111; }
        .c4-cell { width: 35px; height: 35px; background: #222; border-radius: 50%; cursor: pointer; border: 1px solid #333; }
        .c4-cell.p1 { background: var(--accent); }
        .c4-cell.p2 { background: #ff4444; }

        .ttt-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; }
        .ttt-cell { width: 80px; height: 80px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 30px; font-weight: bold; cursor: pointer; color: var(--accent); }

        /* --- WINDOWS --- */
        .window { position: absolute; background: var(--glass); border: 1px solid var(--border); display: none; flex-direction: column; z-index: 3000; border-radius: 15px; overflow: hidden; backdrop-filter: blur(40px); top: 100px; left: 500px; }
        .win-bar { padding: 15px 20px; background: rgba(255,255,255,0.1); cursor: move; display: flex; justify-content: space-between; font-size: 12px; letter-spacing: 2px; }
        
        #taskbar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--glass); border: 1px solid var(--border); padding: 10px 30px; border-radius: 50px; display: flex; gap: 20px; z-index: 5000; }
        .icon { width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; transition: 0.3s; }
        .icon:hover { transform: translateY(-10px); color: var(--accent); }
        #hud { position: fixed; top: 40px; right: 40px; text-align: right; }
        #time { font-size: 48px; color: var(--accent); font-weight: bold; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="auth-wrap">
        <div class="login-box">
            <h1 style="color:var(--accent); margin-bottom:20px;">ARCHITECT_V17</h1>
            <input type="password" id="sys-pass" placeholder="ACCESS KEY">
            <button class="login-btn" onclick="OS.boot()">BOOT SYSTEM</button>
        </div>
    </div>

    <div id="desktop" class="hidden">
        <div id="hud">
            <div id="time">00:00</div>
            <div style="opacity:0.5; font-size:12px;">JANUARY 08, 2026</div>
        </div>

        <div id="ai-interface">
            <div id="mark-face">
                <div class="eye-socket left"><div class="pupil" id="p-l"></div></div>
                <div class="eye-socket right"><div class="pupil" id="p-r"></div></div>
                <div id="mouth"></div>
            </div>
            <div id="ai-bubble">M.A.R.K: Awaiting instructions, Mason. System stable.</div>
            <input type="text" id="ai-input" placeholder="COMMAND...">
        </div>

        <!-- Connect 4 -->
        <div id="win-c4" class="window">
            <div class="win-bar"><span>CONNECT_4</span><span onclick="OS.close('c4')">√ó</span></div>
            <div class="c4-grid" id="c4-board"></div>
        </div>

        <!-- Tic Tac Toe -->
        <div id="win-ttt" class="window">
            <div class="win-bar"><span>TIC_TAC_TOE</span><span onclick="OS.close('ttt')">√ó</span></div>
            <div class="ttt-grid" id="ttt-board"></div>
        </div>

        <!-- Diagnostics -->
        <div id="win-diag" class="window" style="width:300px; padding:20px;">
            <div class="win-bar"><span>DIAGNOSTICS</span><span onclick="OS.close('diag')">√ó</span></div>
            <div id="diag-content" style="font-family:var(--font-mono); font-size:10px; color:var(--accent);">
                > CPU: 4.2GHz <br> > MEMORY: 64GB <br> > NEURAL LINK: ACTIVE <br> > MASON_ID: VERIFIED
            </div>
        </div>

        <div id="taskbar">
            <div class="icon" onclick="OS.open('c4')">üî¥</div>
            <div class="icon" onclick="OS.open('ttt')">‚öîÔ∏è</div>
            <div class="icon" onclick="OS.open('diag')">üìü</div>
        </div>
    </div>

    <script>
        const OS = {
            c4Data: Array(6).fill().map(() => Array(7).fill(0)),
            tttData: Array(9).fill(null),
            
            boot() {
                const p = document.getElementById('sys-pass').value;
                if(["honey", "vip420", "masononly69", ""].includes(p)) {
                    document.getElementById('auth-wrap').classList.add('hidden');
                    document.getElementById('desktop').classList.remove('hidden');
                    this.startClock();
                    this.initEyes();
                }
            },

            startClock() {
                setInterval(() => {
                    document.getElementById('time').innerText = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
                }, 1000);
            },

            initEyes() {
                document.addEventListener('mousemove', (e) => {
                    const pupils = document.querySelectorAll('.pupil');
                    pupils.forEach(pupil => {
                        const rect = pupil.parentElement.getBoundingClientRect();
                        const x = (e.clientX - rect.left) / rect.width * 100;
                        const y = (e.clientY - rect.top) / rect.height * 100;
                        // Contain pupils within the socket boundaries (approx 20-80% range)
                        const cx = Math.max(20, Math.min(80, x));
                        const cy = Math.max(20, Math.min(80, y));
                        pupil.style.left = cx + '%';
                        pupil.style.top = cy + '%';
                    });
                });
            },

            open(id) {
                document.getElementById(`win-${id}`).style.display = 'flex';
                if(id === 'c4') this.drawC4();
                if(id === 'ttt') this.drawTTT();
            },

            close(id) { document.getElementById(`win-${id}`).style.display = 'none'; },

            /* --- CONNECT 4 LOGIC --- */
            drawC4() {
                const b = document.getElementById('c4-board');
                b.innerHTML = '';
                this.c4Data.forEach((row, r) => {
                    row.forEach((cell, c) => {
                        const div = document.createElement('div');
                        div.className = `c4-cell ${cell === 1 ? 'p1' : cell === 2 ? 'p2' : ''}`;
                        div.onclick = () => this.dropC4(c);
                        b.appendChild(div);
                    });
                });
            },
            dropC4(c) {
                for (let r = 5; r >= 0; r--) {
                    if (this.c4Data[r][c] === 0) {
                        this.c4Data[r][c] = 1;
                        this.drawC4();
                        setTimeout(() => this.aiC4(), 500);
                        return;
                    }
                }
            },
            aiC4() {
                let c = Math.floor(Math.random() * 7);
                for (let r = 5; r >= 0; r--) {
                    if (this.c4Data[r][c] === 0) {
                        this.c4Data[r][c] = 2;
                        this.drawC4();
                        return;
                    }
                }
                this.aiC4(); // Retry if column full
            },

            /* --- TIC TAC TOE LOGIC --- */
            drawTTT() {
                const b = document.getElementById('ttt-board');
                b.innerHTML = '';
                this.tttData.forEach((cell, i) => {
                    const div = document.createElement('div');
                    div.className = 'ttt-cell';
                    div.innerText = cell || '';
                    div.onclick = () => {
                        if(!this.tttData[i]) {
                            this.tttData[i] = 'X';
                            this.drawTTT();
                            setTimeout(() => this.aiTTT(), 500);
                        }
                    };
                    b.appendChild(div);
                });
            },
            aiTTT() {
                const empty = this.tttData.map((v, i) => v === null ? i : null).filter(v => v !== null);
                if(empty.length > 0) {
                    this.tttData[empty[Math.floor(Math.random() * empty.length)]] = 'O';
                    this.drawTTT();
                }
            }
        };
    </script>
</body>
</html>
